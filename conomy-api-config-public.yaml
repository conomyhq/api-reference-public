swagger: '2.0'
info:
  title: conomy-business-rules
  description: Conomy business rules
  version: 1.0.0
host: api.conomy.app
schemes:
  - https
produces:
  - application/json
securityDefinitions:
  apitoken:
    type: apiKey
    name: x-api-key
    in: header
paths:
  /v1/transaction:
    post:
      tags:
        - transaction
      summary: Post a new transaction to apply business rules
      operationId: postTransaction
      description: Apply business rules to every transaction
      consumes:
        - application/json
      x-google-backend:
        address: 'https://conomy-switch-service-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: Transaction
          description: Transaction to apply business rules
          schema:
            $ref: '#/definitions/Transaction'
      security:
        - apitoken: []
      responses:
        '201':
          description: Transaction created
          schema:
            $ref: '#/definitions/Transaction'
        '400':
          description: invalid input
        '401':
          description: invalid token
        '409':
          description: an existing item already exists
        '422':
          description: invalid Json
        '500':
          description: internal error
  '/card/{card_id}':
    get:
      tags:
        - Card
      description: 'The Cards service provides information about user''s cards, and the endpoint /cards/{card_id} with the method GET fetch the information about a specific id.'
      summary: "Get a specific card by card ID \U0001F4B3"
      operationId: getCardId
      x-google-backend:
        address: 'https://conomy-data-report-composite-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - type: string
          name: card_id
          in: path
          required: true
          description: card ID
      security:
        - apitoken: []
      responses:
        '200':
          description: Card information
          schema:
            $ref: '#/definitions/Card'
        '400':
          description: Bad Request. A required parameter for this API operation is invalid or has not been provided.
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Invalid or missing authentication token.
          examples:
            Unauthorized Error:
              detail: Jwt is missing
              type: AuthError
              code: 401
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Data not found in the DB.
          examples:
            Not Found Error:
              detail: The user could not be found in the DB
              type: NotFoundError
              code: 404
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal server error.
          schema:
            $ref: '#/definitions/Error500'
          examples:
            Server Error:
              detail: Internal Server Error
              type: ServerError
              code: 500
  /card:
    post:
      tags:
        - Card
      summary: "Create a card and add to a specific user \U0001F45B"
      operationId: createCard
      description: 'The Cards service delivers cards data. The /cards endpoint with POST method adds a card owned by a specific user id and save it on an array of card objects, which includes all its cards attributes.'
      consumes:
        - application/json
      x-google-backend:
        address: 'https://conomy-data-report-composite-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: Card
          description: Card schema
          schema:
            $ref: '#/definitions/CardCreate'
      security:
        - apitoken: []
      responses:
        '201':
          description: Card information
          schema:
            $ref: '#/definitions/CardCreate'
        '400':
          description: Bad Request. A required parameter for this API operation is invalid or has not been provided.
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Invalid or missing authentication token.
          examples:
            Unauthorized Error:
              detail: Jwt is missing
              type: AuthError
              code: 401
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Data not found in the DB.
          examples:
            Not Found Error:
              detail: The user could not be found in the DB
              type: NotFoundError
              code: 404
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal server error.
          schema:
            $ref: '#/definitions/Error500'
          examples:
            Server Error:
              detail: Internal Server Error
              type: ServerError
              code: 500
    parameters: []
  '/conomyCard/{conomycard_id}':
    get:
      summary: "Get all the information of a specific Conomy Card \U0001F4B3"
      security:
        - apitoken: []
      responses:
        '200':
          description: Response a Conomy Card Object
          schema:
            $ref: '#/definitions/ConomyCard'
        '400':
          description: Bad Request. A required parameter for this API operation is invalid or has not been provided.
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Invalid or missing authentication token.
          examples:
            Unauthorized Error:
              detail: Jwt is missing
              type: AuthError
              code: 401
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Data not found in the DB.
          examples:
            Not Found Error:
              detail: The user could not be found in the DB
              type: NotFoundError
              code: 404
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal server error.
          schema:
            $ref: '#/definitions/Error500'
          examples:
            Server Error:
              detail: Internal Server Error
              type: ServerError
              code: 500
      operationId: getConomyCardId
      description: The Conomy Card service provides all the data about Conomy Cards and the GET method fetch a specific card by its id.
      tags:
        - Conomy Card
      x-google-backend:
        address: 'https://conomy-data-report-composite-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
    parameters:
      - type: string
        name: conomycard_id
        in: path
        required: true
        description: Conomy card ID
  /conomyCard:
    parameters: []
    post:
      summary: "Create a new Conomy Card \U0001F4B3"
      operationId: postConomyCard
      security:
        - apitoken: []
      responses:
        '200':
          description: Response a Conomy Card Object
          schema:
            $ref: '#/definitions/ConomyCardCreate'
        '400':
          description: Bad Request. A required parameter for this API operation is invalid or has not been provided.
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Invalid or missing authentication token.
          examples:
            Unauthorized Error:
              detail: Jwt is missing
              type: AuthError
              code: 401
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Data not found in the DB.
          examples:
            Not Found Error:
              detail: The user could not be found in the DB
              type: NotFoundError
              code: 404
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal server error.
          schema:
            $ref: '#/definitions/Error500'
          examples:
            Server Error:
              detail: Internal Server Error
              type: ServerError
              code: 500
      tags:
        - Conomy Card
      description: The Conomy Card service host all the data about Conomy Cards and the POST method creates a new Conomy Card based on the attributes provided.
      parameters:
        - in: body
          name: body
          schema:
            $ref: '#/definitions/ConomyCardCreate'
          description: Request are all the attributes but active default payment card and description
      x-google-backend:
        address: 'https://conomy-data-report-composite-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
  /user:
    post:
      tags:
        - User
      summary: "Create a new user in the db \U0001F929"
      operationId: addUser
      description: 'The Users services provides user information. The /users endpoint with a POST method register a new user in the db with its personal information such as name, last name, national id, phone among other data.'
      consumes:
        - application/json
      security:
        - apitoken: []
      x-google-backend:
        address: 'https://conomy-data-report-composite-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: User
          description: User schema
          schema:
            $ref: '#/definitions/UserCreate'
      responses:
        '201':
          description: matching user
          schema:
            $ref: '#/definitions/UserCreate'
        '400':
          description: Bad Request. A required parameter for this API operation is invalid or has not been provided.
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Invalid or missing authentication token.
          examples:
            Unauthorized Error:
              detail: Jwt is missing
              type: AuthError
              code: 401
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Data not found in the DB.
          examples:
            Not Found Error:
              detail: The user could not be found in the DB
              type: NotFoundError
              code: 404
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal server error.
          schema:
            $ref: '#/definitions/Error500'
          examples:
            Server Error:
              detail: Internal Server Error
              type: ServerError
              code: 500
    parameters: []
  '/user/{user_id}':
    get:
      tags:
        - User
      summary: "Get a specific user \U0001F60A"
      operationId: getUser
      description: 'The Users service provides user information. The /users/{id} endpoint with a GET method fetch a specific user by its user id from the db with its personal information such as name, last name, national id, phone among other data.'
      x-google-backend:
        address: 'https://conomy-data-report-composite-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: search results matching criteria
          schema:
            $ref: '#/definitions/User'
        '400':
          description: Bad Request. A required parameter for this API operation is invalid or has not been provided.
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Invalid or missing authentication token.
          examples:
            Unauthorized Error:
              detail: Jwt is missing
              type: AuthError
              code: 401
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Data not found in the DB.
          examples:
            Not Found Error:
              detail: The user could not be found in the DB
              type: NotFoundError
              code: 404
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal server error.
          schema:
            $ref: '#/definitions/Error500'
          examples:
            Server Error:
              detail: Internal Server Error
              type: ServerError
              code: 500
      security:
        - apitoken: []
    parameters:
      - type: string
        name: user_id
        in: path
        required: true
        description: User ID
  /transaction:
    post:
      summary: "Transaction switch \U0001F511"
      operationId: transactionSwitch
      description: The Switch service receive transaction's information. The /transaction endpoint with a POST method register every transaction.
      consumes:
        - application/json
      x-google-backend:
        address: 'https://conomy-switch-service-ylggeyc7ba-uc.a.run.app'
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: User
          description: User schema
          schema:
            $ref: '#/definitions/SwitchTransaction'
          x-examples: {}
      responses:
        '201':
          description: matching user
          schema:
            $ref: '#/definitions/SwitchTransactionResponse'
        '400':
          description: Bad Request. A required parameter for this API operation is invalid or has not been provided.
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Invalid or missing authentication token.
          examples:
            Unauthorized Error:
              detail: Jwt is missing
              type: AuthError
              code: 401
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Data not found in the DB.
          examples:
            Not Found Error:
              detail: The user could not be found in the DB
              type: NotFoundError
              code: 404
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal server error.
          schema:
            $ref: '#/definitions/Error500'
          examples:
            Server Error:
              detail: Internal Server Error
              type: ServerError
              code: 500
      tags:
        - Transaction Switch
      security:
        - apitoken: []
    parameters: []
  /v1/goals-challenges:
    post:
      summary: Create goal or challenge
      tags:
        - Goals & Challenges
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/GoalandChallengeCreateResponse'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error500'
      operationId: post-v1-goals
      parameters:
        - in: body
          name: body
          schema:
            $ref: '#/definitions/GoalandChallengeCreate'
          description: Goal & challenge schema
      description: The goals and challenges service is responsible for storing and handling all goals and challenges of our users. The /goals-challenges/ endpoint with a POST method register a new goal or challenge in the db with  a goal and challenge model field.
      x-internal: true
    parameters: []
    get:
      summary: Get goals and challenges by user_id
      operationId: get-v1-goals-challenges
      responses:
        '200':
          description: OK
          schema:
            type: object
            properties:
              goalschallenges:
                $ref: '#/definitions/GoalandChallenge'
              _links:
                type: array
                items:
                  $ref: '#/definitions/_links'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error500'
      description: The goals and challenges service is responsible for storing and handling all goals and challenges of our users. The /goals-challenges/ endpoint with a GET method fetch a goals and challenges by user_upayments_uuid
      parameters:
        - type: string
          in: query
          name: user_upayments_uuid
          description: upayments user identifier
      tags:
        - Goals & Challenges
      x-internal: true
  '/v1/goals-challenges/{id}':
    get:
      summary: Get goal or challenge by id
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/GoalandChallengeResponse'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error500'
      operationId: get-v1-goals-challenge
      description: 'The goals and challenges service is responsible for storing and handling all goals and challenges of our users. The /goals-challenges/{id} endpoint with a GET method fetch a specific goal or challenge by id'
      parameters: []
      tags:
        - Goals & Challenges
      x-internal: true
    put:
      summary: Modify goal or challenge by id
      operationId: put-v1-goals-challenge
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/GoalandChallengeResponse'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error500'
      description: 'The goals and challenges service is responsible for storing and handling all goals and challenges of our users. The /goals-challenges/{id} endpoint with a PUT method updates a goal or challenge values by id'
      parameters:
        - in: body
          name: body
          schema:
            $ref: '#/definitions/GoalandChallenge'
      tags:
        - Goals & Challenges
      x-internal: true
    parameters:
      - type: string
        name: id
        in: path
        required: true
    delete:
      summary: Delete goal or challenge by id
      operationId: delete-v1-goals-challenges-id
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error404'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error500'
      description: 'The goals and challenges service is responsible for storing and handling all goals and challenges of our users. The /goals-challenges/{id} endpoint with a PUT method deletes a goal or challenge values by id'
      tags:
        - Goals & Challenges
      x-internal: true
  '/v1/goals-challenges/{id}/confirm':
    parameters:
      - type: string
        name: id
        in: path
        required: true
        description: Goal or Challenge identifier
    post:
      summary: Complete the setup of an objective or challenge
      operationId: post-v1-goals-challenges-id-confirm
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/GoalandChallengeResponse'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error400'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error401'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error404'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error500'
      description: 'The goals and challenges service is responsible for storing and handling all goals and challenges of our users. The /goals-challenges/{id}/confirm endpoint with a POST method confirms the goal or challenge attempt.'
      tags:
        - Goals & challenges
definitions:
  Transaction:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: 96daafcf-9f83-4c2c-8706-eb557e20c23c
    required:
      - _id
  Address:
    type: object
    description: This is a model to represent user address
    properties:
      id:
        type: string
        format: uuid
        example: d04882ef-cf1a-40c9-b571-a6b4fa3514fd
      user_id:
        type: string
        format: uuid
        example: d04882ef-cf1a-40c9-b571-a6b4fa3514fd
      administrative_area_level_1:
        type: string
        example: Valparaiso
      administrative_area_level_2:
        type: string
        example: ConCon
      locality:
        type: string
      street:
        type: string
        example: Los Pillines
      street_number:
        type: string
      optional_address:
        type: string
        example: '340'
        description: Like an apartment number
    required:
      - id
      - user_id
      - administrative_area_level_1
      - administrative_area_level_2
      - street
      - optional_address
  AddressModify:
    type: object
    properties:
      administrative_area_level_1:
        type: string
        example: Valparaiso
      administrative_area_level_2:
        type: string
        example: ConCon
      locality:
        type: string
        example: Los Pillines
      optional_address:
        type: string
        example: '340'
      street:
        type: string
      street_number:
        type: string
  AddressCreate:
    type: object
    properties:
      user_id:
        type: string
      administrative_area_level_1:
        type: string
        example: Valparaiso
      administrative_area_level_2:
        type: string
        example: ConCon
      locality:
        type: string
        example: Los Pillines
      optional_address:
        type: string
        example: '340'
      street:
        type: string
      street_number:
        type: string
  Rule:
    type: object
    description: Rule that defines business rules and has its atomic processes to apply to the transaction
    properties:
      id:
        type: string
      type:
        type: string
        description: Rule's type
        example: Profile rule
      description:
        type: string
        description: Rule description for human reading
      processes:
        type: array
        description: Processes are atomic operations that when accomplished in sequence define and apply the rule as a whole
        items:
          $ref: '#/definitions/RuleProcess'
    required:
      - id
      - type
      - description
      - processes
  RuleFiltered:
    type: object
    description: Rule that defines business rules and has its atomic processes to apply to the transaction
    title: ''
    properties:
      id:
        type: string
      type:
        type: string
        description: Rule's type
        example: Profile rule
      description:
        type: string
        description: Rule description for human reading
    required:
      - id
      - type
      - description
  RuleProcess:
    type: object
    description: 'Atomic process definition, it applies one simple operation of the rule. It follows a simple operation syntax, left variable + operation + right variable.'
    properties:
      id:
        type: string
      type:
        type: string
        description: Rule's type
      description:
        type: string
        description: Rule description for human reading
      leftVariable:
        type: string
      rightVariable:
        type: string
      operation:
        type: string
    required:
      - id
      - type
      - description
  Card:
    type: object
    x-examples: {}
    properties:
      id:
        type: string
      externalId:
        type: string
        description: Card external identifier
      userId:
        type: string
        format: uuid
        example: 96daafcf-9f83-4c2c-8706-eb557e20c23c
        description: user conomy identifier
      issuingBank:
        type: string
        example: BancoDeChile
        description: Issuing Bank
      cardBrand:
        type: string
        example: MasterCard
        description: 'MASTERCARD, VISA, AMEX, MAGNA'
      cardholderName:
        type: string
        example: Pablo insulza
        description: name shown on card
      pan:
        type: string
        example: '************1234'
        description: Obfuscated card number
      currency:
        type: string
        example: CLP
        description: Card currency
      isActive:
        type: boolean
        example: false
        description: Card state
      color:
        type: string
        description: User-defined card color (HEX)
      cardType:
        type: string
        description: 'PREPAID, DEBIT, CREDIT'
      description:
        type: string
        description: Info shown on conomy app
      priority:
        type: string
        description: 'Card priority. MAIN: Principal card, BACKUP: Second card'
      createdAt:
        type: string
        format: date-time
        example: '2017-07-21T17:32:28Z'
      updatedAt:
        type: string
        format: date-time
        example: '2017-07-21T17:32:28Z'
    required:
      - issuingBank
      - cardBrand
      - cardholderName
      - pan
      - currency
      - isActive
  CardCreate:
    type: object
    x-examples:
      example-1:
        id: 96daafcf-9f83-4c2c-8706-eb557e20c23c
        card_issuer: BancoDeChile
        card_brand: MasterCard
        holder_card_name: Pablo insulza
        card_number: '************1234'
        currency: CLP
        is_active: false
        created_at: '2017-07-21T17:32:28Z'
        updated_at: '2017-07-21T17:32:28Z'
        color: string
        card_account_type: cuenta vista
        description: {}
    properties:
      externalId:
        type: string
        description: Card external identifier
      userId:
        type: string
        description: User conomy id
      issuingBank:
        type: string
        example: BancoDeChile
        description: Issuing Bank
      cardBrand:
        type: string
        example: MasterCard
        description: 'MASTERCARD, VISA, AMEX, MAGNA'
      cardholderName:
        type: string
        example: Pablo insulza
        description: name shown on card
      pan:
        type: string
        example: '************1234'
        description: Obfuscated card number
      currency:
        type: string
        example: CLP
        description: Card Currency
      isActive:
        type: boolean
        example: false
        description: Card state
      color:
        type: string
        description: User-defined card color (HEX)
      cardType:
        type: string
        description: 'PREPAID, DEBIT, CREDIT'
      description:
        type: string
        description: Info shown on conomy app
      priority:
        type: string
        description: 'Card priority. MAIN: Principal card, BACKUP: Second card'
    required:
      - externalId
      - issuingBank
      - cardBrand
      - cardholderName
      - pan
      - currency
  ConomyCard:
    type: object
    title: Conomy Card
    description: ''
    properties:
      id:
        type: string
        format: uuid
        example: 96daafcf-9f83-4c2c-8706-eb557e20c23c
      userId:
        type: string
        format: uuid
        example: 96daafcf-9f83-4c2c-8706-eb557e20c23c
      issuingBank:
        type: string
        example: BancoDeChile
        description: Issuing Bank
      cardBrand:
        type: string
        example: MasterCard
      cardholderName:
        type: string
        example: Pablo insulza
      pan:
        type: string
        example: '************1234'
        description: Obfuscated card number
      currency:
        type: string
        example: CLP
        description: Card Currency
      isActive:
        type: boolean
        example: false
        description: Card state
      createdAt:
        type: string
        format: date-time
        example: '2017-07-21T17:32:28Z'
      updatedAt:
        type: string
        format: date-time
        example: '2017-07-21T17:32:28Z'
      description:
        type: string
    required:
      - id
      - userId
      - issuingBank
      - cardBrand
      - cardholderName
      - pan
      - currency
      - isActive
  ConomyCardCreate:
    type: object
    title: Conomy Card Create
    description: ''
    properties:
      externalId:
        type: string
        format: uuid
        example: 96daafcf-9f83-4c2c-8706-eb557e20c23c
      userId:
        type: string
        format: uuid
        example: 96daafcf-9f83-4c2c-8706-eb557e20c23c
      issuingBank:
        type: string
        example: BancoDeChile
        description: Issuing Bank
      cardBrand:
        type: string
        example: MasterCard
      cardholderName:
        type: string
        example: Pablo insulza
      pan:
        type: string
        example: '************1234'
        description: Obfuscated card number
      currency:
        type: string
        example: CLP
        description: Card Currency
      description:
        type: string
    required:
      - externalId
      - cardBrand
      - cardholderName
      - pan
      - currency
  User:
    type: object
    description: Conomy User Model
    properties:
      id:
        type: string
        example: b92e761a-279a-11ec-9621-0242ac130002
      userExternalId:
        type: string
        description: User u-payments uuid
      name:
        type: string
        example: Mauricio
        description: User name
      nickName:
        type: string
        example: JFT
        description: user nickname
      lastName:
        type: string
        example: Gatica
        description: user last name
      email:
        type: string
        description: user email
      maritalStatus:
        type: string
        description: 'MARRIED, SINGLE, DIVORCED, WIDOW '
      phone:
        type: string
        example: '+5691238159123'
        description: phone number
      dni:
        type: string
        example: 12.612.412-2
        description: Unique country identifier
      career:
        type: string
        description: User career/ocuppation
      address:
        type: string
        example: Bellas Artes
      status:
        type: string
        example: active
      contractId:
        type: string
        example: 1dhHkkf76
      rulesId:
        type: array
        example:
          - af1gs
          - l2b3f
          - hjg3k3
        items:
          type: string
    required:
      - id
      - userExternalId
      - name
      - lastName
      - email
      - maritalStatus
      - phone
      - dni
      - career
      - address
      - status
      - contractId
  UserModify:
    description: ''
    type: object
    x-examples:
      example-1:
        user_id: b92e761a-279a-11ec-9621-0242ac130002
        name: Mauricio
        nick_name: JFT
        last_name: Gatica
        rut: 12.612.412-2
        phone: '+5691238159123'
        account: user
        password_pin: '2424'
        profession: string
        gender: string
        civil_status: string
        email: string
    properties:
      name:
        type: string
        description: User name
      lastName:
        type: string
        description: User last name
      email:
        type: string
        minLength: 1
        description: user email
      nickName:
        type: string
        minLength: 1
        description: user nick name
      phone:
        type: string
        minLength: 1
        description: phone number
      career:
        type: string
        minLength: 1
        description: user career/ocuppation
      gender:
        type: string
        minLength: 1
        description: 'FEMALE, MALE, OTHER'
      maritalStatus:
        type: string
        minLength: 1
        description: 'User civil status. MARRIED, SINGLE, DIVORCED, WIDOW'
      address:
        type: string
        example: Bellas Artes
      status:
        type: string
        example: active
      contractId:
        type: string
        example: 1dhHkkf76
      rulesId:
        type: array
        example:
          - af1gs
          - l2b3f
          - hjg3k3
        items:
          type: string
  UserCreate:
    type: object
    properties:
      userExternalId:
        type: string
        description: user u-payments uuid
      name:
        type: string
        example: Mauricio
        description: user name
      lastName:
        type: string
        example: Gatica
        description: user last name
      nickName:
        type: string
        description: User nickname
      email:
        type: string
        description: user email
      dni:
        type: string
        example: 12.612.412-2
        description: Unique country identifier
      phone:
        type: string
        description: User phone number
      career:
        type: string
        description: user career/ocuppation
      gender:
        type: string
        description: 'FEMALE, MALE, OTHER'
      maritalStatus:
        type: string
        description: 'MARRIED, SINGLE, DIVORCED, WIDOW'
      address:
        type: string
        example: Bellas Artes
      status:
        type: string
        example: active
      contractId:
        type: string
        example: 1dhHkkf76
    required:
      - userExternalId
  SwitchTransaction:
    description: ''
    type: object
    properties:
      idConomyCardReferenceToken:
        type: string
        minLength: 1
      amount:
        type: string
        minLength: 1
      currency:
        type: string
        minLength: 1
      transactionId:
        type: string
        minLength: 1
    required:
      - idConomyCardReferenceToken
      - amount
      - currency
      - transactionId
    x-examples:
      example-1:
        idConomyCardReferenceToken: test
        amount: test
        currency: clp
        transactionId: test
  SwitchTransactionResponse:
    description: ''
    type: object
    properties:
      idConomyCardReferenceToken:
        type: string
        minLength: 1
      amount:
        type: string
        minLength: 1
      currency:
        type: string
        minLength: 1
      transactionId:
        type: string
        minLength: 1
      links:
        type: array
        items:
          properties: {}
    required:
      - idConomyCardReferenceToken
      - amount
      - currency
      - transactionId
      - links
    x-examples:
      example-1:
        idConomyCardReferenceToken: asd
        amount: as
        currency: clp
        transactionId: iasd
        links: []
  Error400:
    title: BadRequestError
    type: object
    x-examples: {}
    properties:
      code:
        type: number
        example: 2
      type:
        type: string
        example: GenericError
      detail:
        type: string
        example: A required parameter for this API operation is invalid or has not been provided
    required:
      - code
      - type
      - detail
    description: ''
  Error401:
    title: UnauthorizedError
    type: object
    x-examples:
      Unauthorized Error 401:
        detail: Jwt is missing
        type: AuthError
        code: 3
    properties:
      code:
        type: number
        example: 401
      type:
        type: string
        example: AuthError
      detail:
        type: string
        example: Jwt is missing
    required:
      - code
      - type
      - detail
  Error404:
    title: NotFoundError
    type: object
    x-examples:
      example-1:
        code: 4
        type: UserNotFound
        detail: The user could not be found in the DB
    properties:
      code:
        type: number
        example: 404
      type:
        type: string
        example: NotFoundError
      detail:
        type: string
        example: The user could not be found in the DB
    required:
      - code
      - type
      - detail
  Error500:
    title: InternalServerError
    type: object
    x-examples:
      example-1:
        code: 5
        type: ServerError
        detail: Internal Server Error
    properties:
      code:
        type: number
        example: 500
      type:
        type: string
        example: ServerError
      detail:
        type: string
        example: Internal Server Error
    required:
      - code
      - type
      - detail
  GoalandChallenge:
    title: Goal&Challenge Response
    type: object
    description: Goal and challenge response model
    properties:
      id:
        type: string
      userId:
        type: string
      userExternalId:
        type: string
      type:
        type: string
      description:
        type: object
        properties:
          title:
            type: string
          image:
            type: string
          color:
            type: string
          detail:
            type: string
      endTime:
        type: string
      targetAmount:
        type: number
      rules:
        type: array
        items:
          $ref: '#/definitions/RuleFiltered'
      status:
        type: string
        description: 'INACTIVE, ACTIVE, COMPLETE, PENDING'
      currentAmount:
        type: number
      created_at:
        type: string
      updated_at:
        type: string
  GoalandChallengeResponse:
    title: Goal&Challenge
    type: object
    description: Goal and challenge model
    properties:
      id:
        type: string
      userId:
        type: string
      userExternalId:
        type: string
      type:
        type: string
      description:
        type: object
        properties:
          title:
            type: string
          image:
            type: string
          color:
            type: string
          detail:
            type: string
      endTime:
        type: string
      targetAmount:
        type: number
      rules:
        type: array
        items:
          $ref: '#/definitions/RuleFiltered'
      status:
        type: string
        description: 'INACTIVE, ACTIVE, COMPLETE, PENDING'
      currentAmount:
        type: number
      created_at:
        type: string
      updated_at:
        type: string
      _links:
        type: array
        items:
          $ref: '#/definitions/_links'
  GoalandChallengeFiltered:
    title: Goal&ChallengeFiltered
    type: object
    description: Goal and challenge model
    properties:
      id:
        type: string
      type:
        type: string
      description:
        type: object
        properties:
          title:
            type: string
          image:
            type: string
          color:
            type: string
          detail:
            type: string
      endTime:
        type: string
      targetAmount:
        type: number
      rules:
        type: array
        items:
          $ref: '#/definitions/RuleFiltered'
      status:
        type: string
        description: 'INACTIVE, ACTIVE, COMPLETE, PENDING'
      currentAmount:
        type: number
  GoalandChallengeFilteredResponse:
    title: Goal&ChallengeFilteredResponse
    type: object
    description: Goal and challenge filtered response model
    properties:
      id:
        type: string
      type:
        type: string
      description:
        type: object
        properties:
          title:
            type: string
          image:
            type: string
          color:
            type: string
          detail:
            type: string
      endTime:
        type: string
      targetAmount:
        type: number
      rules:
        type: array
        items:
          $ref: '#/definitions/RuleFiltered'
      status:
        type: string
        description: 'INACTIVE, ACTIVE, COMPLETE, PENDING'
      currentAmount:
        type: number
      _links:
        type: array
        items:
          $ref: '#/definitions/_links'
  GoalandChallengeModify:
    title: Goal&ChallengeModify
    type: object
    description: Goal and challenge model
    properties:
      type:
        type: string
      description:
        type: object
        properties:
          title:
            type: string
          image:
            type: string
          color:
            type: string
          detail:
            type: string
      endTime:
        type: string
      targetAmount:
        type: number
      status:
        type: string
        description: 'INACTIVE, ACTIVE, COMPLETE, PENDING'
      rules:
        type: array
        description: rulesId
        items:
          type: string
  GoalandChallengeCreate:
    title: Goal&ChallengeCreate
    type: object
    description: Goal and challenge model
    properties:
      userId:
        type: string
      userExternalId:
        type: string
      type:
        type: string
      description:
        type: object
        properties:
          title:
            type: string
          image:
            type: string
          color:
            type: string
          detail:
            type: string
      endTime:
        type: string
      targetAmount:
        type: number
      status:
        type: string
        description: 'INACTIVE, ACTIVE, COMPLETE, PENDING'
  GoalandChallengeCreateResponse:
    title: Goal&ChallengeCreate Response
    type: object
    description: Goal and challenge response model
    properties:
      userId:
        type: string
      userExternalId:
        type: string
      type:
        type: string
      description:
        type: object
        properties:
          title:
            type: string
          image:
            type: string
          color:
            type: string
          detail:
            type: string
      endTime:
        type: string
      targetAmount:
        type: number
      status:
        type: string
        description: 'INACTIVE, ACTIVE, COMPLETE, PENDING'
      _links:
        type: array
        items:
          $ref: '#/definitions/_links'
  _links:
    title: _links
    type: object
    description: A list of link types and descriptions.
    properties:
      rel:
        type: string
        description: This describes the type of links
      route:
        type: string
        description: This property contais a full-qualified URL
      method:
        type: string
        description: The HTTP method that should be used
      targetSchema:
        type: string
        description: 'For requests, this is a URL representing the schema that the response should conform to.'
      schema:
        type: string
        description: 'For HTTP methods that can receive bodies (POST and PUT), this is a URL representing the schema that the body should conform to.'
    required:
      - rel
      - route
      - method
